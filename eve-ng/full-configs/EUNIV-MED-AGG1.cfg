!
! =====================================================================
! EUNIV-MED-AGG1 - Full Configuration
! Role: aggregation
! ASN: 65200
! Generated for E University Network Lab
! =====================================================================
!
hostname EUNIV-MED-AGG1
!
! --- Services ---
service timestamps debug datetime msec localtime show-timezone
service timestamps log datetime msec localtime show-timezone
service password-encryption
no service pad
!
enable secret admin
username admin privilege 15 secret admin
!
! --- Logging ---
logging buffered 65536 informational
logging console informational
!
ip domain-name euniv.edu
ip name-server 10.255.255.1
ip name-server 10.255.255.2
!
! --- SSH ---
crypto key generate rsa modulus 2048
ip ssh version 2
!
! --- NTP ---
ntp server 10.255.255.10
ntp server 10.255.255.11
clock timezone EST -5 0
!
! --- SNMP ---
snmp-server community euniv-mon-ro RO
snmp-server location E University Data Center
snmp-server contact noc@euniv.edu
!
! --- Banner ---
banner motd ^
***********************************************
*  E UNIVERSITY NETWORK INFRASTRUCTURE       *
*               EUNIV-MED-AGG1              *
*  Authorized Access Only                    *
***********************************************
^
!
! =====================================================================
! LOOPBACK INTERFACE
! =====================================================================
!
interface Loopback0
 description Router-ID / BGP Source
 ip address 10.255.2.1 255.255.255.255
 ip ospf 1 area 0
 no shutdown
!
! =====================================================================
! MANAGEMENT INTERFACE
! =====================================================================
!
interface GigabitEthernet1
 description Management
 ip address 192.168.68.211 255.255.252.0
 no shutdown
!
! =====================================================================
! CORE INTERFACES
! =====================================================================
!
interface GigabitEthernet2
 description To EUNIV-CORE2
 ip address 10.0.2.2 255.255.255.252
 ip ospf 1 area 0
 ip ospf network point-to-point
 mpls ip
 no shutdown
!
interface GigabitEthernet3
 description To EUNIV-CORE3
 ip address 10.0.2.6 255.255.255.252
 ip ospf 1 area 0
 ip ospf network point-to-point
 mpls ip
 no shutdown
!
interface GigabitEthernet4
 description To EUNIV-MED-PE1
 ip address 10.0.2.9 255.255.255.252
 ip ospf 1 area 0
 ip ospf network point-to-point
 mpls ip
 no shutdown
!
interface GigabitEthernet5
 description To EUNIV-MED-PE2
 ip address 10.0.2.13 255.255.255.252
 ip ospf 1 area 0
 ip ospf network point-to-point
 mpls ip
 no shutdown
!
! =====================================================================
! OSPF CONFIGURATION
! =====================================================================
!
router ospf 1
 router-id 10.255.2.1
 auto-cost reference-bandwidth 100000
 passive-interface Loopback0
 passive-interface GigabitEthernet1
 log-adjacency-changes detail
!
! =====================================================================
! MPLS CONFIGURATION
! =====================================================================
!
mpls ldp router-id Loopback0 force
mpls label protocol ldp
!
! =====================================================================
! BGP CONFIGURATION
! =====================================================================
!
router bgp 65200
 bgp router-id 10.255.2.1
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
!
 neighbor 10.255.0.1 remote-as 65200
 neighbor 10.255.0.1 update-source Loopback0
 neighbor 10.255.0.2 remote-as 65200
 neighbor 10.255.0.2 update-source Loopback0
 neighbor 10.255.2.11 remote-as 65200
 neighbor 10.255.2.11 update-source Loopback0
 neighbor 10.255.2.12 remote-as 65200
 neighbor 10.255.2.12 update-source Loopback0
 !
 address-family ipv4
  neighbor 10.255.0.1 activate
  neighbor 10.255.0.1 send-community both
  neighbor 10.255.0.2 activate
  neighbor 10.255.0.2 send-community both
  neighbor 10.255.2.11 activate
  neighbor 10.255.2.11 send-community both
  neighbor 10.255.2.12 activate
  neighbor 10.255.2.12 send-community both
 exit-address-family
 !
 address-family vpnv4
  neighbor 10.255.0.1 activate
  neighbor 10.255.0.1 send-community extended
  neighbor 10.255.0.2 activate
  neighbor 10.255.0.2 send-community extended
  neighbor 10.255.2.11 activate
  neighbor 10.255.2.11 send-community extended
  neighbor 10.255.2.12 activate
  neighbor 10.255.2.12 send-community extended
 exit-address-family
!
!
! =====================================================================
! DEFAULT ROUTE & SECURITY
! =====================================================================
!
ip route 0.0.0.0 0.0.0.0 192.168.68.1
!
ip access-list standard VTY-ACCESS
 permit 10.0.0.0 0.255.255.255
 permit 192.168.68.0 0.0.3.255
 deny any log
!
line con 0
 logging synchronous
 exec-timeout 30 0
line vty 0 15
 access-class VTY-ACCESS in
 login local
 transport input ssh
 exec-timeout 30 0
!
end
