!
! =====================================================================
! EUNIV-MAIN-PE1 - Full Configuration
! Role: pe-bng
! ASN: 65100
! Generated for E University Network Lab
! =====================================================================
!
hostname EUNIV-MAIN-PE1
!
! --- Services ---
service timestamps debug datetime msec localtime show-timezone
service timestamps log datetime msec localtime show-timezone
service password-encryption
no service pad
!
enable secret admin
username admin privilege 15 secret admin
!
! --- Logging ---
logging buffered 65536 informational
logging console informational
!
ip domain-name euniv.edu
ip name-server 10.255.255.1
ip name-server 10.255.255.2
!
! --- SSH ---
crypto key generate rsa modulus 2048
ip ssh version 2
!
! --- NTP ---
ntp server 10.255.255.10
ntp server 10.255.255.11
clock timezone EST -5 0
!
! --- SNMP ---
snmp-server community euniv-mon-ro RO
snmp-server location E University Data Center
snmp-server contact noc@euniv.edu
!
! --- Banner ---
banner motd ^
***********************************************
*  E UNIVERSITY NETWORK INFRASTRUCTURE       *
*               EUNIV-MAIN-PE1              *
*  Authorized Access Only                    *
***********************************************
^
!
! =====================================================================
! VRF DEFINITIONS
! =====================================================================
!
vrf definition STUDENT-NET
 description Student residential network
 rd 10.255.1.11:100
 !
 address-family ipv4
  route-target import 65000:100
  route-target export 65000:100
 exit-address-family
!
!
vrf definition STAFF-NET
 description Staff and faculty network
 rd 10.255.1.11:200
 !
 address-family ipv4
  route-target import 65000:200
  route-target export 65000:200
 exit-address-family
!
!
vrf definition RESEARCH-NET
 description Research partner network
 rd 10.255.1.11:300
 !
 address-family ipv4
  route-target import 65000:300
  route-target export 65000:300
 exit-address-family
!
!
vrf definition GUEST-NET
 description Guest/visitor network
 rd 10.255.1.11:500
 !
 address-family ipv4
  route-target import 65000:500
  route-target export 65000:500
 exit-address-family
!
! =====================================================================
! LOOPBACK INTERFACE
! =====================================================================
!
interface Loopback0
 description Router-ID / BGP Source
 ip address 10.255.1.11 255.255.255.255
 ip ospf 1 area 0
 no shutdown
!
! =====================================================================
! MANAGEMENT INTERFACE
! =====================================================================
!
interface GigabitEthernet1
 description Management
 ip address 192.168.68.209 255.255.252.0
 no shutdown
!
! =====================================================================
! CORE INTERFACES
! =====================================================================
!
interface GigabitEthernet2
 description To EUNIV-MAIN-AGG1
 ip address 10.0.1.10 255.255.255.252
 ip ospf 1 area 0
 ip ospf network point-to-point
 mpls ip
 no shutdown
!
interface GigabitEthernet3
 description To EUNIV-MAIN-PE2 (HA)
 ip address 10.0.1.17 255.255.255.252
 ip ospf 1 area 0
 ip ospf network point-to-point
 mpls ip
 no shutdown
!
! =====================================================================
! OSPF CONFIGURATION
! =====================================================================
!
router ospf 1
 router-id 10.255.1.11
 auto-cost reference-bandwidth 100000
 passive-interface Loopback0
 passive-interface GigabitEthernet1
 log-adjacency-changes detail
!
! =====================================================================
! MPLS CONFIGURATION
! =====================================================================
!
mpls ldp router-id Loopback0 force
mpls label protocol ldp
!
! =====================================================================
! BGP CONFIGURATION
! =====================================================================
!
router bgp 65100
 bgp router-id 10.255.1.11
 bgp log-neighbor-changes
 no bgp default ipv4-unicast
!
 neighbor 10.255.1.1 remote-as 65100
 neighbor 10.255.1.1 update-source Loopback0
 !
 address-family ipv4
  neighbor 10.255.1.1 activate
  neighbor 10.255.1.1 send-community both
 exit-address-family
 !
 address-family ipv4 vrf STUDENT-NET
  redistribute connected
 exit-address-family
 !
 address-family ipv4 vrf STAFF-NET
  redistribute connected
 exit-address-family
 !
 address-family ipv4 vrf RESEARCH-NET
  redistribute connected
 exit-address-family
 !
 address-family ipv4 vrf GUEST-NET
  redistribute connected
 exit-address-family
!
!
! =====================================================================
! DEFAULT ROUTE & SECURITY
! =====================================================================
!
ip route 0.0.0.0 0.0.0.0 192.168.68.1
!
ip access-list standard VTY-ACCESS
 permit 10.0.0.0 0.255.255.255
 permit 192.168.68.0 0.0.3.255
 deny any log
!
line con 0
 logging synchronous
 exec-timeout 30 0
line vty 0 15
 access-class VTY-ACCESS in
 login local
 transport input ssh
 exec-timeout 30 0
!
end
